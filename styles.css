:root {
  --bg: #0f1115;
  --bg-alt: #191c22;
  --panel: #1f242c;
  --panel-alt: #262d37;
  --border: #303945;
  --text: #e8eef5;
  --text-dim: #9aa8b9;
  --accent: #ff9d1d;
  --accent-glow: 255 157 29;
  --danger: #ff4d55;
  --radius-s: 4px;
  --radius: 10px;
  --radius-l: 18px;
  --shadow: 0 2px 4px -2px rgba(0 0 0 / 40%), 0 6px 18px -6px rgba(0 0 0 / 55%);
  font-family: 'Inter', system-ui, Avenir, Helvetica, Arial, sans-serif;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin:0; background: radial-gradient(circle at 25% 15%, #1c2230, #0d0f12 70%); color: var(--text); -webkit-font-smoothing: antialiased; }

.visually-hidden { position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden; }

.app-header { display:flex; flex-wrap:wrap; justify-content:space-between; align-items:flex-end; gap:1rem; padding:1.25rem clamp(1rem,4vw,3rem); background:linear-gradient(135deg,#191f28,#12161c); border-bottom:1px solid var(--border); box-shadow:var(--shadow); position:sticky; top:0; z-index:10; }
.logo { margin:0; font-size:clamp(1.4rem,3vw,2.2rem); background:linear-gradient(90deg,#ffce4f,#ff9d1d 40%,#ff7b4f); -webkit-background-clip:text; background-clip:text; color:transparent; letter-spacing:.5px; }
.tagline { margin:.25rem 0 0; font-size:.9rem; color:var(--text-dim); }
.user-box input { background:var(--panel); color:var(--text); border:1px solid var(--border); padding:.6rem .8rem; border-radius:var(--radius-s); min-width:200px; box-shadow:inset 0 0 0 1px rgba(255 255 255 / 4%); }
.user-box input:focus { outline:2px solid rgba(var(--accent-glow)/60%); outline-offset:2px; }

.layout { display:grid; gap:2rem; padding:2rem clamp(1rem,4vw,3rem); grid-template-columns: minmax(260px, 360px) 1fr; align-items:start; }
.layout-wide { grid-template-columns: minmax(300px, 430px) minmax(260px, 360px) 1fr; }
@media (max-width: 1180px){ .layout-wide { grid-template-columns: minmax(320px,460px) 1fr; } }
@media (max-width: 880px){ .layout, .layout-wide { grid-template-columns: 1fr; } }

.panel { background:linear-gradient(140deg,var(--panel),var(--panel-alt)); border:1px solid var(--border); padding:1.25rem 1.35rem 1.5rem; border-radius:var(--radius); box-shadow:var(--shadow); position:relative; overflow:hidden; }
.panel h2 { margin:0 0 1rem; font-size:1.2rem; letter-spacing:.5px; font-weight:600; }
.panel-header { display:flex; justify-content:space-between; gap:1rem; align-items:center; margin-bottom:1rem; }
.filters { display:flex; gap:.6rem; }
.filters select, .filters input { background:var(--panel-alt); color:var(--text); border:1px solid var(--border); padding:.55rem .7rem; border-radius:var(--radius-s); font-size:.85rem; }
.filters input { width:160px; }

.form-grid { display:grid; gap:1rem 1.2rem; grid-template-columns:repeat(2,1fr); }
.form-grid .field { display:flex; flex-direction:column; gap:.35rem; }
.form-grid label { font-size:.7rem; text-transform:uppercase; letter-spacing:1px; font-weight:600; color:var(--text-dim); }
.form-grid input, .form-grid textarea { background:var(--panel-alt); color:var(--text); border:1px solid var(--border); padding:.65rem .75rem; border-radius:var(--radius-s); resize:vertical; font:inherit; }
.span-2 { grid-column:1 / -1; }
.actions { display:flex; justify-content:flex-end; }

.btn { --btn-bg:var(--panel-alt); --btn-color:var(--text); background:var(--btn-bg); color:var(--btn-color); border:1px solid var(--border); padding:.65rem 1rem; border-radius:var(--radius-s); font-weight:500; cursor:pointer; font-size:.9rem; line-height:1; letter-spacing:.3px; display:inline-flex; align-items:center; gap:.4rem; transition:.22s background, .22s color, .22s border; }
.btn.primary { --btn-bg:linear-gradient(120deg,#ffb347,#ff9d1d 55%,#ff7b4f); border:none; color:#1d1205; font-weight:600; box-shadow:0 4px 10px -3px rgba(var(--accent-glow)/55%), 0 1px 0 0 rgba(255 255 255 / 25%) inset; }
.btn.primary:hover { filter:brightness(1.05); }
.btn.ghost { background:transparent; color:var(--text-dim); }
.btn.ghost:hover { color:var(--text); background:rgba(255 255 255 / 4%); }
.btn.small { padding:.4rem .55rem; font-size:.75rem; }
.btn.danger { background:var(--danger); color:#fff; border:none; }
.btn:focus-visible { outline:2px solid rgba(var(--accent-glow)/65%); outline-offset:2px; }

.cards { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:1.1rem; }
.movie-card { position:relative; display:flex; flex-direction:column; gap:.65rem; background:linear-gradient(160deg,#212831,#1a2027); padding:1rem .95rem 1rem; border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); isolation:isolate; }
.movie-card:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 15% 10%, rgba(var(--accent-glow)/10%), transparent 60%); opacity:.6; pointer-events:none; }
.movie-head { display:flex; justify-content:space-between; align-items:flex-start; gap:.5rem; }
.movie-title { margin:0; font-size:1rem; font-weight:600; line-height:1.2; }
.year { font-size:.75rem; background:rgba(255 255 255 / 6%); padding:.25rem .45rem; border-radius:var(--radius-s); letter-spacing:.5px; color:var(--text-dim); }
.notes { margin:0; font-size:.75rem; line-height:1.3; color:var(--text-dim); }

.rating-block { display:flex; flex-direction:column; gap:.4rem; }
.stars { display:inline-flex; flex-direction:row-reverse; gap:.15rem; }
.star-btn { --size:22px; width:var(--size); height:var(--size); cursor:pointer; background:linear-gradient(180deg,#434d59,#2d353f); border:1px solid #323a44; border-radius:4px; position:relative; display:grid; place-items:center; font-size:.8rem; color:#777; transition:.25s; box-shadow:0 1px 0 0 rgba(255 255 255 / 7%) inset; }
.star-btn[data-active="true"], .star-btn:hover, .star-btn:focus-visible { background:linear-gradient(160deg,#ffcf70,#ff9d1d 60%,#ff7b4f); color:#2b1a07; border-color:#e28b15; text-shadow:0 0 2px rgba(0 0 0 / 45%); }
.star-btn:focus-visible { outline:2px solid rgba(var(--accent-glow)/55%); outline-offset:2px; }
.avg-line { font-size:.7rem; color:var(--text-dim); display:flex; gap:.4rem; flex-wrap:wrap; }
.avg-line .avg { font-weight:600; color:var(--accent); }

.card-actions { display:flex; justify-content:flex-end; margin-top:auto; }
.delete-btn { opacity:.6; }
.delete-btn:hover { opacity:1; color:var(--danger); }

.app-footer { text-align:center; padding:2rem 1rem 3rem; font-size:.7rem; color:var(--text-dim); }

/* Search no results */
#moviesList.no-results:before { content:"No movies match your search."; color:var(--text-dim); font-size:.85rem; grid-column:1 / -1; padding:2rem; text-align:center; }

/* Scrollbars (webkit) */
::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-track { background:#111418; }
::-webkit-scrollbar-thumb { background:#2d333b; border-radius:6px; }
::-webkit-scrollbar-thumb:hover { background:#3a424c; }

/* Animations */
@media (prefers-reduced-motion: no-preference){
  .movie-card { animation:pop .4s cubic-bezier(.4,.8,.4,1); }
  @keyframes pop { from { transform:scale(.92); opacity:0; } }
}

/* Rules panel */
.rules-list { margin:.4rem 0 1rem .9rem; padding:0; font-size:.75rem; line-height:1.35; display:grid; gap:.35rem; }
.rules-list.numbered { list-style:decimal; margin-left:1.2rem; }
.rules-list li { margin:0; }
#rules-panel details { background:rgba(255 255 255 / 3%); border:1px solid var(--border); padding:.65rem .8rem .75rem; border-radius:var(--radius-s); margin-bottom:.7rem; }
#rules-panel details[open] summary { margin-bottom:.4rem; }
#rules-panel summary { cursor:pointer; font-weight:600; letter-spacing:.5px; }
.mini-note { font-size:.65rem; color:var(--text-dim); margin:.3rem 0 0; }

/* Category badges */
.cat-badge { background:linear-gradient(145deg,#2a313a,#232a32); border:1px solid #323a40; padding:.35rem .5rem; border-radius:var(--radius-s); font-size:.6rem; letter-spacing:.5px; font-weight:600; color:var(--text-dim); display:inline-flex; gap:.3rem; }
.cat-badge[data-empty="false"] { color:var(--accent); }
.cat-badge.bonus { background:linear-gradient(145deg,#2a2c3a,#232532); border:1px solid #3a3240; opacity:0.8; }
.cat-badge.bonus[data-empty="false"] { color:#9d7bff; }
.cat-badge[data-locked="true"] { filter:blur(1px) grayscale(.4); position:relative; }
.cat-badge[data-locked="true"]:after { content:"ðŸ”’"; font-size:.55rem; margin-left:.25rem; opacity:.8; }
.scores-wrap { display:flex; flex-direction:column; gap:.5rem; }
.score-row { display:flex; flex-wrap:wrap; gap:.4rem; }
.total-line { display:flex; gap:.7rem; flex-wrap:wrap; align-items:center; font-size:.7rem; }
.total-badge { background:linear-gradient(120deg,#ffb347,#ff9d1d 55%,#ff7b4f); color:#1d1205; padding:.35rem .6rem; border-radius:999px; font-size:.7rem; font-weight:600; box-shadow:0 2px 5px -1px rgba(var(--accent-glow)/45%); }
.locked-msg { font-size:.6rem; background:rgba(255 255 255 / 5%); border:1px dashed var(--border); padding:.4rem .5rem; border-radius:var(--radius-s); color:var(--text-dim); }

/* Dialog */
#rateDialog { border:none; background:linear-gradient(160deg,#1d232b,#14181d); color:var(--text); padding:1.2rem 1.3rem 1.4rem; border-radius:16px; width:clamp(300px, 90vw, 520px); box-shadow:0 10px 38px -8px rgba(0 0 0 / 70%), 0 2px 4px -2px rgba(0 0 0 / 55%); }
#rateDialog::backdrop { background:rgba(0 0 0 / 70%); backdrop-filter:blur(2px); }
.dialog-title { margin:0 0 .9rem; font-size:1rem; font-weight:600; }
.cat-grid { display:grid; gap:.75rem 1rem; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); margin-bottom:1rem; }
.cat-grid label { display:flex; flex-direction:column; gap:.3rem; font-size:.65rem; text-transform:uppercase; letter-spacing:.6px; font-weight:600; color:var(--text-dim); }
.cat-grid label.bonus-category { opacity:0.8; border-top:1px solid var(--border); padding-top:.75rem; margin-top:.25rem; }
.cat-grid label.bonus-category small { font-size:.5rem; color:#9d7bff; font-weight:400; }
.cat-grid input { background:var(--panel-alt); border:1px solid var(--border); color:var(--text); padding:.55rem .55rem; border-radius:var(--radius-s); font:inherit; text-align:center; font-weight:600; }
.cat-grid input:focus { outline:2px solid rgba(var(--accent-glow)/55%); outline-offset:2px; }
.dialog-actions { display:flex; justify-content:flex-end; gap:.6rem; }

/* Individual Reviews */
.individual-reviews { margin-top:.75rem; }
.reviews-toggle { font-size:.7rem; font-weight:600; color:var(--text-dim); cursor:pointer; letter-spacing:.5px; text-transform:uppercase; }
.reviews-toggle:hover { color:var(--text); }
.reviews-list { margin-top:.5rem; display:flex; flex-direction:column; gap:.5rem; }
.no-reviews { margin:0; font-size:.65rem; color:var(--text-dim); font-style:italic; }
.user-review { background:rgba(255 255 255 / 2%); border:1px solid var(--border); padding:.5rem .6rem; border-radius:var(--radius-s); }
.reviewer-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:.35rem; }
.reviewer-name { font-size:.7rem; color:var(--text); font-weight:600; }
.reviewer-total { font-size:.65rem; color:var(--accent); font-weight:600; }
.reviewer-scores { display:flex; flex-wrap:wrap; gap:.25rem; }
.score-item { background:rgba(255 255 255 / 4%); padding:.2rem .35rem; border-radius:3px; font-size:.6rem; color:var(--text-dim); }
.score-item.bonus { color:#9d7bff; }

/* Utility error highlight */
.error { animation:flash 1.2s ease; }
@keyframes flash { 0%,100%{ box-shadow:0 0 0 0 rgba(255 77 85 / 0%);} 20%,50%{ box-shadow:0 0 0 3px rgba(255 77 85 / 60%);} }

/* ==============================
   Bâ€‘Movie Theme Enhancements
   ============================== */
body.theme-bmovie {
  background:
    radial-gradient(circle at 15% 20%, rgba(255 30 60 / 12%), transparent 60%),
    radial-gradient(circle at 85% 70%, rgba(255 180 40 / 10%), transparent 55%),
    repeating-linear-gradient(135deg, #0d0f12 0 14px, #101319 14px 28px);
  position:relative;
  overflow-x:hidden;
}
body.theme-bmovie:before {
  content:""; position:fixed; inset:0; pointer-events:none; opacity:.25;
  background:
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 100 100" fill="none" stroke="rgba(255,255,255,0.04)" stroke-width="1"><path d="M0 10 H100 M0 50 H100 M0 90 H100 M10 0 V100 M50 0 V100 M90 0 V100"/></svg>');
  mix-blend-mode:overlay;
}

/* Film grain */
@keyframes filmGrain { 0%{transform:translate(0,0);} 25%{transform:translate(-1px,1px);} 50%{transform:translate(1px,-1px);} 75%{transform:translate(-1px,-1px);} }
body.theme-bmovie:after { content:""; position:fixed; inset:0; pointer-events:none; background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"> <filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" stitchTiles="stitch"/></filter><rect width="160" height="160" filter="url(%23n)" opacity="0.25"/></svg>'); mix-blend-mode:soft-light; animation:filmGrain 1.8s steps(4,end) infinite; opacity:.18; }

/* Pulpy headline styling */
.theme-bmovie .logo { font-family:'Bangers', Impact, sans-serif; letter-spacing:1.5px; text-shadow:2px 2px 0 #3d0d00, 3px 3px 6px rgba(0 0 0 / 70%); animation:logoPulse 6s ease-in-out infinite; }
@keyframes logoPulse { 0%,100%{ filter:drop-shadow(0 0 0 rgba(255 120 0 / 0.4)); } 50% { filter:drop-shadow(0 0 10px rgba(255 150 60 / 0.55)); } }

.theme-bmovie h2 { font-family:'Bangers', Impact, sans-serif; letter-spacing:1px; color:#ffce4f; text-shadow:1px 1px 0 #5c1d00, 2px 2px 4px rgba(0 0 0 / 70%); }

/* Panel cinematic edge */
.theme-bmovie .panel { background:linear-gradient(150deg,#1b2027 0%,#12161b 60%,#181d24 100%); border:1px solid #2d343d; box-shadow:0 6px 18px -4px rgba(0 0 0 / 70%), 0 0 0 1px rgba(255 200 60 / 4%), inset 0 0 0 1px rgba(255 255 255 / 3%); position:relative; }
.theme-bmovie .panel:before { content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 20%, rgba(255 160 50 / 7%), transparent 60%); pointer-events:none; }

/* Buttons mutation */
.theme-bmovie .btn.primary { font-family:'Share Tech Mono', monospace; text-transform:uppercase; letter-spacing:1px; box-shadow:0 4px 14px -4px rgba(255 150 40 / 55%), 0 0 0 1px rgba(255 255 255 / 28%) inset; }
.theme-bmovie .btn.primary:hover { transform:translateY(-2px); box-shadow:0 6px 16px -4px rgba(255 170 60 / 65%), 0 0 0 1px rgba(255 255 255 / 32%) inset; }

/* Category badges â€“ horror comic vibe */
.theme-bmovie .cat-badge { font-family:'Share Tech Mono', monospace; text-transform:uppercase; }
.theme-bmovie .cat-badge.bonus { background:linear-gradient(145deg,#2d2340,#251d34); border-color:#4b3370; }
.theme-bmovie .cat-badge.bonus[data-empty="false"] { color:#c29dff; text-shadow:0 0 4px rgba(180 120 255 / 40%); }

/* Locked message embellishment */
.theme-bmovie .locked-msg { background:linear-gradient(120deg,#2a171a,#251d10); border:1px solid #3c2629; box-shadow:0 0 0 1px rgba(255 120 80 / 10%); }
.theme-bmovie .locked-msg strong { color:#ffb347; }

/* Individual reviews styling adjustments */
.theme-bmovie .user-review { background:linear-gradient(145deg,#232831,#1c2027); border:1px solid #313840; box-shadow:0 2px 6px -2px rgba(0 0 0 / 60%); }
.theme-bmovie .reviewer-name { font-family:'Share Tech Mono', monospace; letter-spacing:.5px; }
.theme-bmovie .score-item { font-family:'Share Tech Mono', monospace; }
.theme-bmovie .score-item.bonus { background:linear-gradient(130deg,#322244,#281c37); border:1px solid #46325e; }

/* Dialog styling tweaks */
.theme-bmovie #rateDialog { background:linear-gradient(160deg,#181d23,#101317); box-shadow:0 15px 38px -8px rgba(0 0 0 / 80%), 0 0 0 1px rgba(255 160 60 / 8%); }
.theme-bmovie .dialog-title { font-family:'Bangers', Impact, sans-serif; letter-spacing:1px; color:#ffce4f; text-shadow:1px 1px 0 #552800; }
.theme-bmovie .cat-grid label { font-family:'Share Tech Mono', monospace; }

/* Footer flicker accent */
.theme-bmovie .app-footer { font-family:'Share Tech Mono', monospace; opacity:.85; }

/* Fun subtle scanline overlay */
body.theme-bmovie .panel:after { content:""; position:absolute; inset:0; background:repeating-linear-gradient(0deg, rgba(255 255 255 / 2%) 0 1px, transparent 1px 3px); mix-blend-mode:overlay; opacity:.04; pointer-events:none; }

/* Headings inside rules panel */
.theme-bmovie #rules-panel summary { font-family:'Share Tech Mono', monospace; }

/* Hover pulses */
.theme-bmovie .movie-card:hover { outline:1px solid rgba(255 160 60 / 35%); box-shadow:0 6px 18px -6px rgba(255 140 40 / 35%), 0 0 0 1px rgba(255 255 255 / 6%) inset; }

/* Enjoyment highlight */
.theme-bmovie .score-item.bonus { color:#d5bbff; }

